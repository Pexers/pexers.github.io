<!doctype html>
<html lang="{{ site.lang | default: " en-US" }}">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    {% seo %}
    <link rel="stylesheet" href="{{ '/assets/css/style.css?v=' | append: site.github.build_revision | relative_url }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://code.jquery.com/jquery-1.12.4.min.js"
        integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin="anonymous"></script>
    <script src="{{ '/assets/js/respond.js' | relative_url }}"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!--[if lt IE 8]>
    <link rel="stylesheet" href="{{ '/assets/css/ie.css' | relative_url }}">
    <![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    {% include head-custom.html %}
</head>

<body>
    <!-- Hamburger Menu Button (visible on mobile) -->
    <button class="hamburger-menu" id="hamburger-toggle">
        <span></span>
        <span></span>
        <span></span>
    </button>

    <!-- Overlay for mobile menu -->
    <div class="sidebar-overlay" id="sidebar-overlay"></div>

    <div class="wrapper-with-sidebar">
        <!-- Left Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-content">
                <div class="sidebar-header">
                    <div class="github-user-info">
                        <a href="https://github.com/{{ site.github_username | default: 'github' }}" target="_blank"
                            class="github-avatar-link">
                            <img src="https://github.com/{{ site.github_username | default: 'github' }}.png"
                                alt="GitHub Avatar" class="github-avatar">
                        </a>
                        <span class="github-username">{{ site.github_username | default: "username" }}</span>
                    </div>
                </div>

                <nav class="sidebar-nav">
                    <ul>
                        <li><a href="{{ '/' | relative_url }}"><i class="fas fa-home"></i> HOME</a></li>
                    </ul>
                </nav>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <section>
                <div id="title">
                    <h1>{{ page.title | default: site.title | default: site.github.repository_name }}</h1>
                    {% if page.description %}
                    <p>{{ page.description }}</p>
                    {% else %}
                    <p>{{ site.tagline | default: site.description | default: site.github.project_tagline }}</p>
                    {% endif %}
                    <hr>
                </div>

                {{ content }}

            </section>
        </main>
    </div>

    <script>
        // Hamburger menu functionality
        const hamburgerToggle = document.getElementById('hamburger-toggle');
        const sidebar = document.getElementById('sidebar');
        const overlay = document.getElementById('sidebar-overlay');

        function checkWindowSize() {
            if (window.innerWidth > 768) {
                // Desktop view - hide hamburger button and ensure sidebar is visible
                hamburgerToggle.style.display = 'none';
                sidebar.classList.remove('sidebar-open');
                overlay.classList.remove('overlay-active');
                hamburgerToggle.classList.remove('active');
            } else {
                // Mobile view - show hamburger button only if sidebar is closed
                if (!sidebar.classList.contains('sidebar-open')) {
                    hamburgerToggle.style.display = 'flex';
                }
            }
        }

        // Check window size on load and resize
        checkWindowSize();
        window.addEventListener('resize', checkWindowSize);

        hamburgerToggle.addEventListener('click', function () {
            sidebar.classList.add('sidebar-open');
            overlay.classList.add('overlay-active');
            hamburgerToggle.classList.add('active');
            // Hide hamburger button when sidebar is open
            hamburgerToggle.style.display = 'none';
        });

        overlay.addEventListener('click', function () {
            sidebar.classList.remove('sidebar-open');
            overlay.classList.remove('overlay-active');
            hamburgerToggle.classList.remove('active');
            // Show hamburger button when sidebar is closed (only on mobile)
            if (window.innerWidth <= 768) {
                hamburgerToggle.style.display = 'flex';
            }
        });

        // Close sidebar when clicking on a link (mobile)
        const sidebarLinks = document.querySelectorAll('.sidebar-nav a');
        sidebarLinks.forEach(link => {
            link.addEventListener('click', function () {
                if (window.innerWidth <= 768) {
                    sidebar.classList.remove('sidebar-open');
                    overlay.classList.remove('overlay-active');
                    hamburgerToggle.classList.remove('active');
                    // Show hamburger button when sidebar is closed
                    hamburgerToggle.style.display = 'flex';
                }
            });
        });

        // Set active menu item based on current page
        const currentPath = window.location.pathname;
        sidebarLinks.forEach(link => {
            const linkPath = new URL(link.href).pathname;
            if (currentPath === linkPath || (currentPath === '/' && linkPath.endsWith('/'))) {
                link.classList.add('active');
            }
        });
    </script>
</body>

</html>